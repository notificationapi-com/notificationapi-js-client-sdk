exports.id=942,exports.ids=[942],exports.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},5863:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let i=n(167),o=n(997),a=i._(n(6689)),s=n(6921);async function r(e){let{Component:t,ctx:n}=e;return{pageProps:await (0,s.loadGetInitialProps)(t,n)}}class c extends a.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,o.jsx)(e,{...t})}}c.origGetInitialProps=r,c.getInitialProps=r,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4370:(e,t,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.r(t),n.d(t,{default:()=>d});var o=n(997),a=n(6317);n(5469);var s=n(3361),r=n(6689),c=e([a]);a=(c.then?(await c)():c)[0];let d=(0,r.memo)(e=>((0,r.useEffect)(()=>{new a.Z({clientId:"54jas9ae4omlbbq3s0u0d9spui",userId:e.userId}).showInApp({root:"CONTAINER_DIV_ID",popupPosition:s.Fz.BottomLeft})},[e.userId]),o.jsx("div",{id:"CONTAINER_DIV_ID"})));i()}catch(e){i(e)}})},5469:()=>{},5244:(e,t)=>{"use strict";var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},6317:(e,t,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.d(t,{Z:()=>g});var o=n(3361),a=n(6134),s=n(2021),r=n(8929),c=n(819),d=n(3599),p=n(4491),u=n(7611),l=e([s]);s=(l.then?(await l)():l)[0];var f=function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,r)}c((i=i.apply(e,t||[])).next())})},h=function(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},m=["en-US","es-ES","fr-FR","it-IT","pt-BR"],v={"en-US":r,"es-ES":c,"fr-FR":d,"it-IT":p,"pt-BR":u};let g=function(){function e(e){var t,n,i=this;this.destroy=function(){var e;null===(e=i.websocket)||void 0===e||e.close(),Object.values(i.elements).map(function(e){e&&e.remove()})},this.identify=function(e){return f(i,void 0,void 0,function(){var t,n,i,o,a,s;return h(this,function(r){switch(r.label){case 0:if(n=(t=this.state.initOptions).clientId,i=t.userId,o=t.userIdHash,e.id&&e.id!==i)return console.error('The userId "'.concat(e.id,'" does not match the userId "').concat(i,'" provided in the init options. Cancelling action to prevent mistakes.')),[2];return a="".concat(this.state.restBaseURL,"/").concat(encodeURIComponent(n),"/users/").concat(encodeURIComponent(i)),s="Basic "+btoa("".concat(encodeURIComponent(n),":").concat(encodeURIComponent(i),":").concat(null!=o?o:"")),[4,fetch(a,{body:JSON.stringify(e),headers:{"content-type":"application/json",Authorization:s},method:"POST"})];case 1:return r.sent(),[2]}})})},this.askForWebPushPermission=function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/notificationapi-service-worker.js").then(function(e){return f(i,void 0,void 0,function(){var t=this;return h(this,function(n){return Notification.requestPermission().then(function(n){return f(t,void 0,void 0,function(){var t=this;return h(this,function(i){switch(i.label){case 0:if("granted"!==n)return[3,2];return[4,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.state.webPushSettings.applicationServerKey}).then(function(e){return f(t,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return t={webPushTokens:[{sub:{endpoint:e.toJSON().endpoint,keys:e.toJSON().keys}}]},[4,this.identify(t)];case 1:return n.sent(),[2]}})})})];case 1:i.sent(),i.label=2;case 2:return[2]}})})}),[2]})})})},this.showInApp=function(e){i.state.inappOptions=e;var t,n=document.getElementById(e.root);if(!n){console.error('There are no HTML elements with id="'.concat(e.root,'" on the page.'));return}if(i.elements.root=n,e.popupPosition&&!Object.values(o.Fz).includes(e.popupPosition)){console.error('"'.concat(e.popupPosition,'" is not a valid position. Valid positions: ').concat(Object.values(o.Fz).join(", ")));return}n.hasChildNodes()&&(n.innerHTML="");var a=document.createElement("div");a.classList.add("notificationapi-container"),n.appendChild(a),i.elements.popup=document.createElement("div");var r=i.elements.popup;if(r.classList.add("notificationapi-popup"),e.inline)r.classList.add("inline");else{r.classList.add("popup"),r.classList.add("hovering"),r.classList.add("closed");var c=document.createElement("button");c.classList.add("notificationapi-button"),c.innerHTML='<span class="icon-bell-o"></span>',a.appendChild(c),c.onclick=function(){r.classList.contains("closed")?i.openInAppPopup():i.closeInAppPopup()},i.elements.button=c,window.addEventListener("click",function(e){var t,n,o,a=null!==(t=e.target.closest(".notificationapi-popup"))&&void 0!==t&&t,s=null!==(n=e.target.closest(".notificationapi-button"))&&void 0!==n&&n,c=null!==(o=e.target.closest(".notificationapi-preferences-container"))&&void 0!==o&&o;s||a||c||i.elements.notificationMenu||r.classList.add("closed")});var d=document.createElement("div");d.classList.add("notificationapi-unread"),c.appendChild(d),i.elements.unread=d,i.setInAppUnread(i.state.unread)}a.appendChild(r),window.addEventListener("click",function(e){var t;!(null!==(t=e.target.closest(".notificationapi-notification-menu-button"))&&void 0!==t&&t)&&i.elements.notificationMenu&&(i.elements.notificationMenu.remove(),i.elements.notificationMenu=void 0)}),i.elements.popupInner=document.createElement("div");var p=i.elements.popupInner;p.classList.add("notificationapi-popup-inner"),r.appendChild(p),i.elements.popupInner=p,i.elements.header=document.createElement("div");var u=document.createElement("button");u.classList.add("notificationapi-close-button"),u.addEventListener("click",function(){i.closeInAppPopup()}),i.elements.header.appendChild(u);var l=document.createElement("h1");l.innerHTML=s.default.t("notifications"),i.elements.header.appendChild(l);var f=document.createElement("button");if(f.classList.add("notificationapi-preferences-button"),f.innerHTML='<span class="icon-cog"></span>',f.title=s.default.t("notification_settings"),f.addEventListener("click",function(){i.showUserPreferences()}),i.elements.header.appendChild(f),e.markAsReadMode&&e.markAsReadMode!==o.Wq.AUTOMATIC){var h=document.createElement("button");h.classList.add("notificationapi-readAll-button"),h.innerHTML='<span class="icon-check"></span>',h.title=s.default.t("mark_all_as_read"),h.addEventListener("click",function(){i.readAll()}),i.elements.header.appendChild(h)}i.elements.header.classList.add("notificationapi-header"),p.appendChild(i.elements.header);var m=document.createElement("div");m.classList.add("notificationapi-loading");var v=document.createElement("span");if(v.classList.add("icon-spinner8","spinner"),m.appendChild(v),p.appendChild(m),i.elements.notificationsLoading=m,i.elements.footer=document.createElement("div"),e.paginated){i.state.pageSize=null!==(t=e.pageSize)&&void 0!==t?t:5;var g=document.createElement("button");g.classList.add("notificationapi-prev-button"),g.innerHTML="<",g.disabled=!0,g.addEventListener("click",function(){i.changePage(i.state.currentPage-1)}),i.elements.prevButton=g;var _=document.createElement("button");_.classList.add("notificationapi-next-button"),_.innerHTML=">",_.disabled=!0,_.addEventListener("click",function(){i.changePage(i.state.currentPage+1)}),i.elements.nextButton=_,i.elements.footer.appendChild(g),i.elements.footer.appendChild(_)}i.elements.footer.classList.add("notificationapi-footer"),p.appendChild(i.elements.footer),i.addNotificationsToState(i.state.notifications),e.paginated||(p.onscroll=function(){p.scrollTop+p.clientHeight>=p.scrollHeight-100&&i.requestMoreNotifications()}),i.sendWSMessage({route:"inapp_web/unread_count"}),i.sendWSMessage({route:"inapp_web/notifications",payload:{count:50}}),i.websocket&&i.websocket.addEventListener("message",function(e){var t=JSON.parse(e.data);if(t&&t.route){if("inapp_web/unread_count"===t.route){var n=t;i.websocketHandlers.unreadCount(n)}if("inapp_web/notifications"===t.route){var n=t;i.websocketHandlers.notifications(n)}if("inapp_web/new_notifications"===t.route){var n=t;i.websocketHandlers.newNotifications(n)}}})},this.elements={},this.state={initOptions:e,lastNotificationsRequestAt:0,notifications:[],unread:0,oldestNotificationsDate:"",currentPage:0,pageSize:999999,webPushSettings:{applicationServerKey:"",askForWebPushPermission:!1},restBaseURL:null!==(t=e.restBaseURL)&&void 0!==t?t:"https://api.notificationapi.com"};var a=m.reduce(function(e,t){return e[t]={translation:v[t]},e},{});if(s.default.init({resources:a,lng:this.state.initOptions.language,fallbackLng:"en-US"}),this.websocketHandlers={notifications:function(e){var t=e.payload.notifications;if(i.state.lastResponseNotificationsCount=t.length,i.elements.notificationsLoading&&(i.elements.notificationsLoading.remove(),delete i.elements.notificationsLoading),i.addNotificationsToState(t),t.length<50&&!i.elements.empty&&i.elements.popupInner&&i.state.inappOptions&&!i.state.inappOptions.paginated){var n=document.createElement("div");n.innerHTML=s.default.t("no_more_notifications"),n.classList.add("notificationapi-nomore"),i.elements.popupInner.append(n)}i.renderNotifications()},newNotifications:function(e){var t=i.state.notifications.length;i.elements.notificationsLoading&&(i.elements.notificationsLoading.remove(),delete i.elements.notificationsLoading),i.addNotificationsToState(e.payload.notifications),i.renderNotifications();var n=i.state.notifications.length;i.setInAppUnread(i.state.unread+n-t)},unreadCount:function(e){i.setInAppUnread(e.payload.count)},userPreferences:function(e){i.elements.preferencesLoading&&(i.elements.preferencesLoading.remove(),delete i.elements.preferencesLoading),i.renderPreferences(e.payload.userPreferences)}},!e.clientId||"undefined"===e.clientId){console.error("Invalid clientId.");return}if(!e.userId||"undefined"===e.userId){console.error("Invalid userId.");return}if(!1!==e.websocket){var r="".concat(null!==(n=e.websocket)&&void 0!==n?n:"wss://ws.notificationapi.com","?envId=").concat(encodeURIComponent(e.clientId),"&userId=").concat(encodeURIComponent(e.userId)).concat(e.userIdHash?"&userIdHash="+encodeURIComponent(e.userIdHash):"");this.websocket=new WebSocket(r),this.websocket.addEventListener("message",function(e){var t=JSON.parse(e.data);t&&t.route&&"environment/data"===t.route&&(i.state.webPushSettings.applicationServerKey=t.payload.applicationServerKey,"Notification"in window&&"granted"===Notification.permission?i.state.webPushSettings.askForWebPushPermission=!1:(i.state.webPushSettings.askForWebPushPermission=t.payload.askForWebPushPermission,i.state.webPushSettings.askForWebPushPermission&&i.renderWebPushOptIn()))}),this.sendWSMessage({route:"environment/data"})}}return e.prototype.requestMoreNotifications=function(){if(this.websocket&&new Date().getTime()-this.state.lastNotificationsRequestAt>=500&&(void 0===this.state.lastResponseNotificationsCount||this.state.lastResponseNotificationsCount>=50)){this.state.lastNotificationsRequestAt=new Date().getTime();var e={route:"inapp_web/notifications",payload:{before:this.state.oldestNotificationsDate,count:50}};this.sendWSMessage(e)}},e.prototype.showUserPreferences=function(e){var t=this;if(this.elements.preferencesContainer)this.elements.preferencesContainer.classList.remove("closed");else{var n=document.getElementsByTagName("body")[0];if(null==e?void 0:e.parent){var i=document.getElementById(e.parent);i?n=i:console.error('There are no HTML elements with id="'.concat(e.parent,'" on the page.'))}var o=document.createElement("div");o.classList.add("notificationapi-preferences-container"),(null==e?void 0:e.parent)&&o.classList.add("inline"),this.elements.preferencesContainer=o,n.appendChild(o);var a=document.createElement("div");a.classList.add("notificationapi-preferences-backdrop"),a.addEventListener("click",function(){o.classList.add("closed")}),o.appendChild(a);var r=document.createElement("div");r.classList.add("notificationapi-preferences-popup"),o.appendChild(r),this.elements.preferencesPopup=r;var c=document.createElement("button");c.classList.add("notificationapi-preferences-close"),c.addEventListener("click",function(){o.classList.add("closed")}),r.appendChild(c);var d=document.createElement("h1");if(d.innerHTML=s.default.t("notification_preferences"),r.appendChild(d),this.state.webPushSettings.askForWebPushPermission){var p=document.createElement("p");p.innerHTML='<a href="#" class="click-here">'.concat(s.default.t("click_here"),"</a> ").concat(s.default.t("necessary_permissions_push_notifications")),p.classList.add("notificationapi-preferences-web-push-opt-in"),r.appendChild(p),p.addEventListener("click",function(e){e.preventDefault(),t.askForWebPushPermission()})}var u=document.createElement("div");u.classList.add("notificationapi-loading");var l=document.createElement("span");l.classList.add("icon-spinner8","spinner"),u.appendChild(l),r.appendChild(u),this.elements.preferencesLoading=u,this.websocket&&this.websocket.addEventListener("message",function(e){var n=JSON.parse(e.data);n&&n.route&&"user_preferences/preferences"===n.route&&t.websocketHandlers.userPreferences(n)})}this.sendWSMessage({route:"user_preferences/get_preferences"})},e.prototype.getUserPreferences=function(){return f(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return this.sendWSMessage({route:"user_preferences/get_preferences"}),[4,this.websocketMessageReceived("user_preferences/preferences")];case 1:return e=t.sent(),[2,e.payload.userPreferences]}})})},e.prototype.patchUserPreference=function(e,t,n,i){var o={route:"user_preferences/patch_preferences",payload:[{notificationId:e,channelPreferences:[{channel:t,state:n}]}]};i&&(o.payload[0].subNotificationId=i),this.sendWSMessage(o)},e.prototype.openInAppPopup=function(){var e,t,n,i,a,s,r,c,d,p;this.elements.popup&&this.elements.popupInner&&this.elements.button&&this.state.inappOptions&&!this.state.inappOptions.inline&&(t=this.elements.popup,n=this.elements.popupInner,i=this.elements.button,a=(null!==(e=this.state.inappOptions.popupPosition)&&void 0!==e?e:o.Fz.RightBottom).toString(),s=document.documentElement.clientHeight+"px",r="auto",c="auto",d="auto",p="auto",window.innerWidth<768?(r=-i.getBoundingClientRect().top+"px",c=-(document.documentElement.clientHeight-i.getBoundingClientRect().bottom)+"px",d=-i.getBoundingClientRect().left+"px",p=-(document.documentElement.clientWidth-i.getBoundingClientRect().right)+"px"):(a.startsWith("top")&&(c=i.clientHeight+10+"px",s=i.getBoundingClientRect().top-20+"px"),a.startsWith("bottom")&&(c="auto",r=i.clientHeight+10+"px",s=window.innerHeight-i.getBoundingClientRect().bottom-40+"px"),a.startsWith("left")&&(d="auto",p=i.clientWidth+10+"px"),a.startsWith("right")&&(p="auto",d=i.clientWidth+10+"px"),a.endsWith("Top")&&(r="auto",c="0px",s=i.getBoundingClientRect().bottom-20+"px"),a.endsWith("Bottom")&&(c="auto",r="0px",s=window.innerHeight-i.getBoundingClientRect().top-40+"px"),a.endsWith("Left")&&(d="auto",p="0px"),a.endsWith("Right")&&(p="auto",d="0px")),t.style.top=r,t.style.bottom=c,t.style.left=d,t.style.right=p,n.style.maxHeight=s,this.elements.popup.classList.remove("closed"),this.state.inappOptions.markAsReadMode&&this.state.inappOptions.markAsReadMode!==o.Wq.AUTOMATIC||this.readAll())},e.prototype.readAll=function(){this.setInAppUnread(0),this.state.notifications.map(function(e){e.seen=!0}),this.sendWSMessage({route:"inapp_web/unread_clear"}),this.state.inappOptions&&this.state.inappOptions.markAsReadMode&&this.state.inappOptions.markAsReadMode!==o.Wq.AUTOMATIC&&this.elements.popupInner&&this.elements.popupInner.querySelectorAll(".unseen").forEach(function(e){e.classList.remove("unseen")})},e.prototype.closeInAppPopup=function(){this.elements.popup&&this.state.inappOptions&&!this.state.inappOptions.inline&&this.elements.popup.classList.add("closed")},e.prototype.setInAppUnread=function(e){this.state.unread=e,this.elements.unread&&this.state.inappOptions&&!this.state.inappOptions.inline&&(0===e?this.elements.unread.classList.add("hidden"):this.elements.unread.classList.remove("hidden"),e<100?this.elements.unread.innerHTML=e+"":this.elements.unread.innerHTML="+99")},e.prototype.addNotificationsToState=function(e){var t=this,n=e.filter(function(e){return!t.state.notifications.find(function(t){return t.id===e.id})});if(this.state.notifications=this.state.notifications.concat(n),this.state.notifications.sort(function(e,t){return Date.parse(t.date)-Date.parse(e.date)}),this.state.notifications.length>0&&(this.state.oldestNotificationsDate=this.state.notifications[this.state.notifications.length-1].date),0===this.state.notifications.length&&!this.elements.empty&&!this.elements.notificationsLoading&&this.elements.header){var i=document.createElement("div");i.classList.add("notificationapi-empty"),i.innerHTML=s.default.t("no_notifications"),this.elements.header.after(i),this.elements.empty=i}n.length>0&&this.elements.empty&&(this.elements.empty.remove(),delete this.elements.empty)},e.prototype.getPageCount=function(){return Math.max(1,Math.ceil(this.state.notifications.length/this.state.pageSize))},e.prototype.changePage=function(e){this.state.currentPage=e,this.state.currentPage>=this.getPageCount()-2&&this.requestMoreNotifications(),this.renderNotifications()},e.prototype.renderNotifications=function(){var e=this.elements.header,t=this.elements.popupInner;if(e&&t&&this.state.inappOptions){var n=this.state.currentPage,i=this.state.pageSize;this.state.inappOptions.paginated&&t.querySelectorAll(".notificationapi-notification").forEach(function(e){e.remove()});for(var o=n*i;o<this.state.notifications.length&&o<n*i+i;o++){var a=this.state.notifications[o];if(!t.querySelector('[data-notification-id="'.concat(a.id,'"]'))){var s=this.generateNotificationElement(a);if(o===n*i)e.insertAdjacentElement("afterend",s);else{var r=t.querySelector('[data-notification-id="'.concat(this.state.notifications[o-1].id,'"]'));r?r.insertAdjacentElement("afterend",s):console.error("error finding previous notification",this.state.notifications[o-1])}}}this.elements.prevButton&&(this.elements.prevButton.disabled=0===n),this.elements.nextButton&&(this.elements.nextButton.disabled=n>=this.state.notifications.length/i-1)}},e.prototype.generateNotificationElement=function(e){var t=this,n=document.createElement("a");n.setAttribute("data-notification-id",e.id),n.classList.add("notificationapi-notification"),e.redirectURL&&(n.href=e.redirectURL);var i=document.createElement("div");if(i.classList.add("notificationapi-notification-imageContainer"),e.imageURL){var r=document.createElement("img");r.classList.add("notificationapi-notification-image"),r.src=e.imageURL,i.appendChild(r)}else{var c=document.createElement("span");c.classList.add("icon-commenting-o"),c.classList.add("notificationapi-notification-defaultIcon"),i.appendChild(c)}n.appendChild(i);var d=document.createElement("div");d.classList.add("notificationapi-notification-metaContainer");var p=document.createElement("p");p.classList.add("notificationapi-notification-title"),p.innerHTML=e.title,d.appendChild(p);var u=document.createElement("p");if(u.classList.add("notificationapi-notification-date"),u.innerHTML=(0,a.Z)(Date.now()-new Date(e.date).getTime(),s.default),d.appendChild(u),n.appendChild(d),e.seen||n.classList.add("unseen"),this.state.inappOptions&&this.state.inappOptions.markAsReadMode&&this.state.inappOptions.markAsReadMode!==o.Wq.AUTOMATIC){var l=document.createElement("button");l.classList.add("notificationapi-notification-menu-button"),l.innerHTML='<span class="icon-ellipsis-h"></span>',l.addEventListener("click",function(i){i.preventDefault(),null===(o=t.elements.notificationMenu)||void 0===o||o.remove();var o,a=document.createElement("div");a.classList.add("notificationapi-notification-menu");var r=document.createElement("button");r.classList.add("notificationapi-notification-menu-item"),r.innerHTML='<span class="icon-check"></span><span class="notificationapi-notification-menu-item-text">'.concat(s.default.t("mark_as_read"),"</span>"),r.addEventListener("click",function(i){i.preventDefault(),n.classList.remove("unseen"),t.setInAppUnread(t.state.unread-1),t.sendWSMessage({route:"inapp_web/unread_clear",payload:{notificationId:e.id}})}),a.appendChild(r),n.appendChild(a),t.elements.notificationMenu=a}),n.appendChild(l)}return this.state.inappOptions&&this.state.inappOptions.markAsReadMode===o.Wq.MANUAL_AND_CLICK&&n.addEventListener("click",function(i){var o=i.target;o.classList.contains("notificationapi-notification-menu-button")||o.classList.contains("notificationapi-notification-menu")||o.closest(".notificationapi-notification-menu-button")||o.closest(".notificationapi-notification-menu")||(n.classList.remove("unseen"),t.setInAppUnread(t.state.unread-1),t.sendWSMessage({route:"inapp_web/unread_clear",payload:{notificationId:e.id}}))}),n},e.prototype.renderPreferences=function(e){var t,n=this;if(this.elements.preferencesPopup){var i=this.elements.preferencesPopup,o=e.filter(function(e){return e.settings.length>0});if(0===o.length&&!this.elements.preferencesEmpty){var a=document.createElement("div");a.classList.add("notificationapi-preferences-empty"),a.innerHTML=s.default.t("there_are_no_notifications_to_configure"),i.appendChild(a),this.elements.preferencesEmpty=a;return}null===(t=this.elements.preferencesGrid)||void 0===t||t.remove(),this.elements.preferencesGrid=void 0;var r=document.createElement("div");r.classList.add("notificationapi-preferences-grid"),this.elements.preferencesGrid=r,i.appendChild(r);var c={};o.map(function(e){e.settings.map(function(e){c[e.channel]||(c[e.channel]=e.channelName)})});var d=1;Object.values(c).map(function(e,t){var n=document.createElement("div");n.innerHTML=e,n.classList.add("notificationapi-preferences-channel","notificationapi-preferences-col".concat(t+2),"notificationapi-preferences-row".concat(d)),r.appendChild(n)}),d++,o.map(function(e){var t=document.createElement("div");if(t.classList.add("notificationapi-preferences-title","notificationapi-preferences-col1","notificationapi-preferences-row".concat(d)),t.innerHTML=e.title,r.appendChild(t),e.settings.map(function(t){var i=document.createElement("div"),o=Object.keys(c).indexOf(t.channel)+2;i.classList.add("notificationapi-preferences-toggle","notificationapi-preferences-col".concat(o),"notificationapi-preferences-row".concat(d)),i.setAttribute("data-notificationId",e.notificationId),i.setAttribute("data-channel",t.channel);var a=document.createElement("label");a.classList.add("switch"),i.appendChild(a);var s=document.createElement("input");s.setAttribute("type","checkbox"),s.checked=t.state,a.appendChild(s);var p=document.createElement("i");a.appendChild(p),s.addEventListener("change",function(){r.querySelectorAll('.notificationapi-preferences-subtoggle[data-notificationid="'.concat(e.notificationId,'"][data-channel="').concat(t.channel,'"] input')).forEach(function(e){e.disabled=!s.checked}),n.patchUserPreference(e.notificationId,t.channel,s.checked)}),r.appendChild(i)}),d++,e.subNotificationPreferences&&e.subNotificationPreferences.length>0){var o=document.createElement("button");o.innerHTML=s.default.t("expand"),o.setAttribute("data-notificationId",e.notificationId);var a=Object.keys(c).length+2;o.classList.add("notificationapi-preferences-expand","notificationapi-preferences-col".concat(a),"notificationapi-preferences-row".concat(d-1)),o.addEventListener("click",function(e){var t=e.target.getAttribute("data-notificationId");i.querySelectorAll('[data-notificationId="'.concat(t,'"][data-subNotificationId]')).forEach(function(e){e.classList.toggle("closed")})}),r.appendChild(o),e.subNotificationPreferences.map(function(t){var i=document.createElement("div");i.classList.add("notificationapi-preferences-subtitle","notificationapi-preferences-col1","notificationapi-preferences-row".concat(d),"closed"),i.setAttribute("data-subNotificationId",t.subNotificationId),i.setAttribute("data-notificationId",e.notificationId),i.innerHTML=t.title,r.appendChild(i),t.settings.map(function(i){var o=document.createElement("div"),a=Object.keys(c).indexOf(i.channel)+2;o.classList.add("notificationapi-preferences-subtoggle","notificationapi-preferences-col".concat(a),"notificationapi-preferences-row".concat(d),"closed"),o.setAttribute("data-notificationId",t.notificationId),o.setAttribute("data-subNotificationId",t.subNotificationId),o.setAttribute("data-channel",i.channel);var s=document.createElement("label");s.classList.add("switch","small"),o.appendChild(s);var p=document.createElement("input");p.setAttribute("type","checkbox"),p.checked=i.state,e.settings.find(function(e){return e.channel===i.channel&&!1===e.state})&&(p.disabled=!0),s.appendChild(p);var u=document.createElement("i");s.appendChild(u),p.addEventListener("change",function(){n.patchUserPreference(e.notificationId,i.channel,p.checked,t.subNotificationId)}),r.appendChild(o)}),d++})}})}},e.prototype.renderWebPushOptIn=function(){var e=this,t=JSON.parse(localStorage.getItem("askForWebPushPermission")||"true");if(this.elements.header&&t){var n=document.createElement("div");n.classList.add("notificationapi-opt-in-container");var i=document.createElement("div");i.innerHTML=s.default.t("do_you_want_to_receive_push_notifications"),i.classList.add("notificationapi-opt-in-message"),n.appendChild(i);var o=document.createElement("button");o.innerHTML=s.default.t("yes"),o.classList.add("notificationapi-allow-button"),o.addEventListener("click",function(){e.askForWebPushPermission(),localStorage.setItem("askForWebPushPermission","false"),n.style.display="none"}),n.appendChild(o);var a=document.createElement("button");a.innerHTML=s.default.t("no_thanks"),a.classList.add("notificationapi-no-thanks-button"),a.addEventListener("click",function(){localStorage.setItem("askForWebPushPermission","false"),n.style.display="none"}),n.appendChild(a),this.elements.header.appendChild(n)}},e.prototype.sendWSMessage=function(e){if(this.websocket){var t=this.websocket;t.readyState==t.OPEN?t.send(JSON.stringify(e)):t.addEventListener("open",function(){t.send(JSON.stringify(e))})}},e.prototype.websocketMessageReceived=function(e){return f(this,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return[4,this.websocketOpened()];case 1:return t=n.sent(),[2,new Promise(function(n){t.addEventListener("message",function(t){var i=JSON.parse(t.data);i&&i.route&&i.route===e&&n(i)})})]}})})},e.prototype.websocketOpened=function(){var e=this;return new Promise(function(t,n){if(e.websocket){var i=e.websocket;i.readyState==i.OPEN&&t(i)}else n("Websocket is not present.")})},e}();i()}catch(e){i(e)}})},3361:(e,t,n)=>{"use strict";var i,o,a;n.d(t,{Fz:()=>o,Wq:()=>i}),function(e){e.AUTOMATIC="AUTOMATIC",e.MANUAL="MANUAL",e.MANUAL_AND_CLICK="MANUAL_AND_CLICK"}(i||(i={})),function(e){e.TopLeft="topLeft",e.TopRight="topRight",e.LeftTop="leftTop",e.LeftBottom="leftBottom",e.BottomLeft="bottomLeft",e.BottomRight="bottomRight",e.RightTop="rightTop",e.RightBottom="rightBottom"}(o||(o={})),function(e){e.FCM="FCM",e.APN="APN"}(a||(a={}))},6134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});let i=function(e,t){if(e<0)return t.t("just_now");var n=Math.round(e)/1e3,i=Math.round(n/60),o=Math.round(n/3600),a=Math.round(n/86400),s=Math.round(n/2592e3),r=Math.round(n/946728e3);return r>0?"".concat(r," ").concat(1===r?t.t("year"):t.t("years")," ").concat(t.t("ago")):s>0?"".concat(s," ").concat(1===s?t.t("month"):t.t("months")," ").concat(t.t("ago")):a>0?"".concat(a," ").concat(1===a?t.t("day"):t.t("days")," ").concat(t.t("ago")):o>0?"".concat(o," ").concat(1===o?t.t("hour"):t.t("hours")," ").concat(t.t("ago")):i>0?"".concat(i," ").concat(1===i?t.t("minute"):t.t("minutes")," ").concat(t.t("ago")):t.t("just_now")}},8929:e=>{"use strict";e.exports=JSON.parse('{"no_more_notifications":"No more notifications to load","notifications":"Notifications","notification_settings":"Notification Settings","mark_all_as_read":"Mark all as read","no_notifications":"You don\'t have any notifications!","notification_preferences":"Notification Preferences","click_here":"Click here","necessary_permissions_push_notifications":"to give us the necessary browser permissions to send you push notifications.","do_you_want_to_receive_push_notifications":"Do you want to receive push notifications?","yes":"Yes","no_thanks":"No, thanks","expand":"expand","there_are_no_notifications_to_configure":"There are no notifications to configure.","mark_as_read":"Mark as read","ago":"ago","year":"year","years":"years","month":"month","months":"months","day":"day","days":"days","hour":"hour","hours":"hours","minute":"minute","minutes":"minutes","just_now":"just now"}')},819:e=>{"use strict";e.exports=JSON.parse('{"no_more_notifications":"No hay m\xe1s notificaciones para cargar","notifications":"Notificaciones","notification_settings":"Configuraci\xf3n de notificaciones","mark_all_as_read":"Marcar todas como le\xeddas","no_notifications":"\xa1No tienes ninguna notificaci\xf3n!","notification_preferences":"Preferencias de notificaci\xf3n","click_here":"Haz clic aqu\xed","necessary_permissions_push_notifications":"para darnos los permisos necesarios del navegador para enviarte notificaciones push.","do_you_want_to_receive_push_notifications":"\xbfQuieres recibir notificaciones push?","yes":"S\xed","no_thanks":"No, gracias","expand":"expandir","there_are_no_notifications_to_configure":"No hay notificaciones para configurar.","mark_as_read":"Marcar como le\xedda","ago":"hace","year":"a\xf1o","years":"a\xf1os","month":"mes","months":"meses","day":"d\xeda","days":"d\xedas","hour":"hora","hours":"horas","minute":"minuto","minutes":"minutos","just_now":"justo ahora"}')},3599:e=>{"use strict";e.exports=JSON.parse('{"no_more_notifications":"Plus de notifications \xe0 charger","notifications":"Notifications","notification_settings":"Param\xe8tres de notification","mark_all_as_read":"Marquer tout comme lu","no_notifications":"Vous n\'avez aucune notification !","notification_preferences":"Pr\xe9f\xe9rences de notification","click_here":"Cliquez ici","necessary_permissions_push_notifications":"pour nous donner les autorisations de navigateur n\xe9cessaires pour vous envoyer des notifications push.","do_you_want_to_receive_push_notifications":"Voulez-vous recevoir des notifications push ?","yes":"Oui","no_thanks":"Non, merci","expand":"d\xe9velopper","there_are_no_notifications_to_configure":"Il n\'y a pas de notifications \xe0 configurer.","mark_as_read":"Marquer comme lu","ago":"il y a","year":"an","years":"ans","month":"mois","months":"mois","day":"jour","days":"jours","hour":"heure","hours":"heures","minute":"minute","minutes":"minutes","just_now":"\xe0 l\'instant"}')},4491:e=>{"use strict";e.exports=JSON.parse('{"no_more_notifications":"Non ci sono altre notifiche da caricare","notifications":"Notifiche","notification_settings":"Impostazioni notifiche","mark_all_as_read":"Segna tutto come letto","no_notifications":"Non hai nessuna notifica!","notification_preferences":"Preferenze notifiche","click_here":"Clicca qui","necessary_permissions_push_notifications":"per darci i permessi necessari del browser per inviarti notifiche push.","do_you_want_to_receive_push_notifications":"Vuoi ricevere notifiche push?","yes":"S\xec","no_thanks":"No, grazie","expand":"espandi","there_are_no_notifications_to_configure":"Non ci sono notifiche da configurare.","mark_as_read":"Segna come letto","ago":"fa","year":"anno","years":"anni","month":"mese","months":"mesi","day":"giorno","days":"giorni","hour":"ora","hours":"ore","minute":"minuto","minutes":"minuti","just_now":"proprio ora"}')},7611:e=>{"use strict";e.exports=JSON.parse('{"no_more_notifications":"N\xe3o h\xe1 mais notifica\xe7\xf5es para carregar","notifications":"Notifica\xe7\xf5es","notification_settings":"Configura\xe7\xf5es de Notifica\xe7\xf5es","mark_all_as_read":"Marcar todas como lidas","no_notifications":"Voc\xea n\xe3o tem nenhuma notifica\xe7\xe3o!","notification_preferences":"Prefer\xeancias de Notifica\xe7\xf5es","click_here":"Clique aqui","necessary_permissions_push_notifications":"para nos dar as permiss\xf5es necess\xe1rias do navegador para enviar-lhe notifica\xe7\xf5es push.","do_you_want_to_receive_push_notifications":"Voc\xea quer receber notifica\xe7\xf5es push?","yes":"Sim","no_thanks":"N\xe3o, obrigado","expand":"expandir","there_are_no_notifications_to_configure":"N\xe3o h\xe1 notifica\xe7\xf5es para configurar.","mark_as_read":"Marcar como lida","ago":"atr\xe1s","year":"ano","years":"anos","month":"m\xeas","months":"meses","day":"dia","days":"dias","hour":"hora","hours":"horas","minute":"minuto","minutes":"minutos","just_now":"agora mesmo"}')}};